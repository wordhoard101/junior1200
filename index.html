<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>English Vocabulary Master</title>
    <style>
        :root {
            --primary: #4a90e2;
            --success: #2ecc71;
            --danger: #e74c3c;
            --bg: #f5f7fa;
            --card: #ffffff;
            --text: #2c3e50;
            --radius: 12px;
            --shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        
        body {
            font-family: system-ui, -apple-system, sans-serif;
            background: var(--bg);
            color: var(--text);
            margin: 0;
            padding: 0;
            height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* Header & Nav */
        header {
            background: var(--card);
            padding: 1rem;
            box-shadow: var(--shadow);
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 10;
        }

        h1 { margin: 0; font-size: 1.2rem; color: var(--primary); }

        .btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 8px;
            font-size: 0.9rem;
            cursor: pointer;
            transition: opacity 0.2s;
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }
        .btn:active { opacity: 0.7; }
        .btn-outline { background: transparent; color: var(--primary); border: 2px solid var(--primary); }
        .btn-danger { background: var(--danger); }
        .btn-success { background: var(--success); }
        .btn-sm { padding: 0.3rem 0.6rem; font-size: 0.8rem; }

        /* Views */
        .view {
            display: none;
            flex: 1;
            overflow-y: auto;
            padding: 1rem;
            max-width: 600px;
            width: 100%;
            margin: 0 auto;
        }
        .view.active { display: block; }

        /* Dashboard */
        .controls {
            background: var(--card);
            padding: 1.5rem;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            margin-bottom: 1.5rem;
        }

        .toggle-group {
            display: flex;
            background: #e1e4e8;
            border-radius: 8px;
            padding: 4px;
            margin-bottom: 1rem;
        }
        .toggle-opt {
            flex: 1;
            text-align: center;
            padding: 8px;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
        }
        .toggle-opt.selected { background: white; color: var(--primary); shadow: 0 2px 4px rgba(0,0,0,0.05); }

        .filter-group {
            margin-bottom: 1rem;
        }
        .filter-group label { display: block; margin-bottom: 0.5rem; font-weight: bold; }
        select {
            width: 100%;
            padding: 10px;
            border-radius: 8px;
            border: 1px solid #ddd;
            font-size: 1rem;
            background: white;
        }

        .category-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(60px, 1fr));
            gap: 10px;
        }
        .cat-btn {
            aspect-ratio: 1;
            background: var(--card);
            border: 1px solid #ddd;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.2rem;
            cursor: pointer;
            box-shadow: 0 2px 0 #eee;
        }
        .cat-btn:active { transform: translateY(2px); box-shadow: none; }
        
        .big-btn {
            width: 100%;
            padding: 1rem;
            font-size: 1.1rem;
            margin-top: 1rem;
            background: var(--success);
        }

        /* Study Mode */
        .study-list { list-style: none; padding: 0; }
        .study-item {
            background: var(--card);
            padding: 1rem;
            margin-bottom: 0.8rem;
            border-radius: var(--radius);
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .study-word { font-weight: bold; color: var(--primary); font-size: 1.1rem; }
        .study-def { color: #666; font-size: 0.9rem; text-align: right; max-width: 60%; }

        /* Game Mode A: Spelling */
        .spell-card {
            background: var(--card);
            padding: 2rem;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            text-align: center;
            margin-bottom: 1rem;
        }
        .question-text { font-size: 1.2rem; margin-bottom: 1.5rem; color: #444; min-height: 3rem; }
        .input-group { position: relative; margin-bottom: 1.5rem; }
        .spell-input {
            width: 100%;
            padding: 12px;
            font-size: 1.2rem;
            border: 2px solid #ddd;
            border-radius: 8px;
            text-align: center;
            outline: none;
        }
        .spell-input.correct { border-color: var(--success); background: #e8f8f5; }
        .spell-input.wrong { border-color: var(--danger); background: #fdedec; }
        
        .hint-btn {
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            background: #f1c40f;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: white;
            cursor: pointer;
            font-size: 0.8rem;
        }

        .pagination {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 2rem;
        }

        /* Game Mode B: Matching */
        .match-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            padding-bottom: 2rem;
        }
        .match-card {
            background: var(--card);
            padding: 1.5rem 0.5rem;
            border-radius: var(--radius);
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            text-align: center;
            font-size: 0.95rem;
            cursor: pointer;
            min-height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
            border: 2px solid transparent;
            word-break: break-word;
        }
        .match-card.selected { border-color: var(--primary); background: #eaf2f8; transform: scale(0.98); }
        .match-card.matched { opacity: 0; pointer-events: none; transform: scale(0.8); transition: opacity 0.5s, transform 0.5s; }
        .match-card.error { animation: shake 0.4s; border-color: var(--danger); background: #fdedec; }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }

        /* Utilities */
        .hidden { display: none !important; }
        .stats { font-size: 0.9rem; color: #666; margin-bottom: 10px; display: flex; justify-content: space-between; }
        
    </style>
</head>
<body>

    <header>
        <h1 id="app-title">VocabMaster</h1>
        <button class="btn btn-outline btn-sm" onclick="showStudyMode()">üìñ Study List</button>
    </header>

    <div id="view-dashboard" class="view active">
        <div class="controls">
            <div class="toggle-group">
                <div class="toggle-opt selected" onclick="setMode('spell', this)">‚úçÔ∏è Spelling</div>
                <div class="toggle-opt" onclick="setMode('match', this)">üß© Matching</div>
            </div>

            <div class="filter-group">
                <label>Word Length (Difficulty):</label>
                <select id="length-filter">
                    <option value="all">Any Length</option>
                    <option value="3">3 Letters</option>
                    <option value="4">4 Letters</option>
                    <option value="5">5 Letters</option>
                    <option value="6">6 Letters</option>
                    <option value="7">7+ Letters</option>
                </select>
            </div>

            <button class="btn big-btn" onclick="startRandomGame()">üé≤ Test Random 10</button>
        </div>

        <h3>Browse by Starting Letter</h3>
        <div class="category-grid" id="category-grid">
            </div>
    </div>

    <div id="view-spell" class="view">
        <div class="stats">
            <span id="spell-progress">Page 1/5</span>
            <button class="btn btn-sm" onclick="goHome()">Home</button>
        </div>
        <div id="spell-container"></div>
        <div class="pagination">
            <button class="btn btn-outline" id="prev-btn" onclick="changePage(-1)">Previous</button>
            <button class="btn btn-success" id="check-btn" onclick="checkSpelling()">Check Answers</button>
            <button class="btn btn-outline" id="next-btn" onclick="changePage(1)">Next</button>
        </div>
    </div>

    <div id="view-match" class="view">
        <div class="stats">
            <span id="match-score">Pairs: 0/5</span>
            <button class="btn btn-sm" onclick="goHome()">Home</button>
        </div>
        <div id="match-area" class="match-grid"></div>
        <button class="btn big-btn hidden" id="match-next-btn" onclick="startMatchingRound()">Next Round</button>
    </div>

    <div id="view-study" class="view">
        <div class="stats">
            <input type="text" id="study-search" placeholder="Search words..." style="width:70%; padding:8px; border-radius:6px; border:1px solid #ccc;">
            <button class="btn btn-sm" onclick="goHome()">Close</button>
        </div>
        <ul id="study-list" class="study-list"></ul>
    </div>

<script>
    // --- DATA INITIALIZATION ---
    // Note: This string contains the raw data. 
    // Format: word@lengthDefinition
    // You can paste more lines from your CSV files here.
    const rawDataString = `
a lot of@8Ë®±Â§öÔºå(Áâá)
abroad@6ÂúãÂ§ñÔºåÊµ∑Â§ñÔºå(adv)
absent@6Áº∫Â∏≠ÁöÑÔºåÂøÉ‰∏çÂú®ÁÑâÁöÑÔºå(adj)
accident@8ÊÑèÂ§ñÁöÑ‰∫ãÔºå‰∫ãÊïÖÔºå(n)
achieve@7ÂÆåÊàêÔºåÈÅîÂà∞ÔºåÂØ¶ÁèæÔºå(vt)
action@6Âãï‰ΩúÔºåË°åÂãïÔºå(n)
activity@8Ê¥ªÂãïÔºå(n)
admit@5ÊâøË™çÔºåÂáÜË®±‚Ä¶ÈÄ≤ÂÖ•ÔºåÂáÜË®±‚Ä¶Âä†ÂÖ•Ôºå(vt)
adult@5Êàê‰∫∫Ôºå(n)
affect@6ÂΩ±ÈüøÔºå(v)
aid@3Âπ´Âä©ÔºåÊè¥Âä©Ôºå(n)
alarm@5Ë≠¶Â†±Ôºå(n)
album@5Áõ∏Á∞øÔºå(n)
alike@5ÂêåÊ®£ÁöÑÔºåÁõ∏ÂÉèÁöÑÔºå(adj)
aloud@5Âá∫ËÅ≤Âú∞ÔºåÂ§ßËÅ≤Âú∞Ôºå(adv)
alphabet@8Â≠óÊØçÔºåÂ≠óÊØçË°®Ôºå(n)
ambulance@9ÊïëË≠∑ËªäÔºå(n)
ancient@7Â∑≤ÂæÄÁöÑÔºåÂè§‰ª£ÁöÑÔºåÈÅ†Âè§ÁöÑÔºå(adj)
ankle@5Ë∏ùÔºå(n)
ant@3ËûûËüªÔºå(n)
apologize@9ÈÅìÊ≠âÔºåË™çÈåØÔºå(vi)
apply@5Áî≥Ë´ãÔºå(vi)ÔºåÊáâÁî®Ôºå(vt)
appreciate@10Áû≠Ëß£ÔºåÊ¨£Ë≥ûÔºåÊÑüÊøÄÔºå(v)
armchair@8Êâ∂ÊâãÊ§ÖÔºå(n)
army@4ËªçÈöäÔºåËªçÔºå(n)
arrange@7ÂÆâÊéíÔºå(v)
arrest@6ÈÄÆÊçïÔºåÊãòÁïôÔºå(vt)
article@7ÊñáÁ´†ÔºåË´ñÊñáÔºå(n)
Asia@4‰∫ûÊ¥≤Ôºå(n)
assume@6ÂÅáÂÆöÔºåË®≠ÊÉ≥Ôºå(vt)
avoid@5ÈÅøÂÖçÔºå(v)
badminton@9ÁæΩÊØõÁêÉÔºå(n)
balcony@7ÈôΩËá∫Ôºå(n)
barber@6ÁêÜÈ´ÆÂ∏´Ôºå(n)
bark@4(ÁãóÁ≠â)Âê†ÔºåÂè´Ôºå(vi)
base@4Âü∫Âú∞Ôºå(n)
basement@8Âú∞‰∏ãÂÆ§Ôºå(n)
bat@3ËùôËù†Ôºå(n)
bean@4Ë±ÜÔºå(n)
beard@5È¨çÈ¨öÔºåÂÄíÈâ§Ôºå(n)
beginning@9ÈñãÂßãÔºåËµ∑Ê∫êÔºå(n)
behave@6Ë°åÁÇ∫ÔºåË°®ÁèæÔºå(vt)
beyond@6Âú®‚Ä¶ÈÇ£ÈÇäÔºåÈÅ†ÊñºÔºå(prep)
biology@7ÁîüÁâ©Â≠∏Ôºå(n)
bit@3‰∏ÄÈªûÔºå‰∏Ä‰∫õÔºå(n)
bitter@6ÁóõËã¶ÁöÑÔºåÊúâËã¶Âë≥ÁöÑÔºå(adj)
blame@5Ë≤¨ÂÇôÔºåË≤¨ÊÄ™Ôºå(vt)
blank@5Á©∫ÁöÑÔºåÁ©∫ÁôΩÁöÑÔºå(adj)
blouse@6Â•≥ÂºèË•ØË°´Ôºå(n)
board@5(Êú®)ÊùøÔºåËë£‰∫ãÊúÉÔºå(n)
bomb@4ÁÇ∏ÂΩàÔºå(n)
bookcase@8Êõ∏Ê´•Ôºå(n)
bother@6ÊâìÊìæÔºåÈ∫ªÁÖ©Ôºå(v)
bowling@7‰øùÈΩ°ÁêÉÔºå(n)
brick@5Á£öÔºåÁ©çÊú®Ôºå(n)
Britain@7Ëã±ÂúãÔºå(n)
brunch@6Êó©ÂçàÈ§êÔºå(n)
buffet@6Ëá™Âä©È§êÂª≥Ôºå(n)
bug@3Ëü≤ÔºåËªüÈ´îÈåØË™§Ôºå(n)
building@8Âª∫ÁØâÁâ©ÔºåÂ§ßÊ®ìÔºå(n)
bun@3Â∞èÂúìÈ∫µÂåÖÔºå(n)
bundle@6ÂåÖÔºåÊçÜÔºåÊùüÔºå(n)
burger@6(Âè£)Êº¢Â†°Ôºå(n)
burst@5ÁàÜË£ÇÔºå(v)
butterfly@9Ëù¥Ëù∂Ôºå(n)
cabbage@7ÁîòËóçËèúÔºåÊç≤ÂøÉËèúÔºå(n)
cabinet@7(ÊúâÊäΩÂ±úÊàñÊ†ºÂ≠êÁöÑ)Ê´•Ê´ÉÔºå(n)
cable@5Á≤óÁ¥¢ÔºåÈõªÁ∫úÔºå(n)
cafeteria@9Ëá™Âä©È§êÂª≥Ôºå(n)
calendar@8ÊúàÊõÜÔºåË°å‰∫ãÊõÜÔºå(n)
camping@7Èú≤ÁáüÔºå(n)
campus@6Ê†°ÂúíÔºåÂúíÂçÄÔºå(n)
cancel@6ÂèñÊ∂àÔºå(v)
cancer@6ÁôåÔºå(n)
careless@8‰∏çÊ≥®ÊÑèÁöÑÔºåÁ≤óÂøÉÂ§ßÊÑèÁöÑÔºå(adj)
cash@4ÁèæÈáëÔºå(n)
cassette@8(Ë£ùÈåÑÈü≥Â∏∂ÁöÑ)Âç°ÂºèÁõíÔºå(n)
century@7‰∏ñÁ¥ÄÔºåÁôæÂπ¥Ôºå(n)
cereal@6Á©ÄÁâ©ÔºåÈ∫•ÁâáÔºå(n)
certain@7Á¢∫ÂÆöÁöÑÔºåËÇØÂÆöÁöÑÔºå(adj)
channel@7Êµ∑Â≥ΩÔºåÈ†ªÈÅìÔºå(n)
character@9ÊÄßÊ†ºÔºåÁâπÊÄßÔºå‰∫∫Áâ©Ôºå(n)
charge@6Á¥¢ÂÉπÔºåÊéßÂëäÔºåÂÖÖÈõªÔºå(vt)
chase@5ËøΩË∂ïÔºåÈ©ÖÈÄêÔºå(v)
chemical@8ÂåñÂ≠∏ÁöÑÔºå(adj)
chess@5Ë•øÊ¥ãÊ£ãÔºå(n)
childhood@9Â≠©Á´•ÊôÇÊúüÔºå(n)
chin@4‰∏ãÂ∑¥Ôºå(n)
choice@6ÈÅ∏ÊìáÔºåÊäâÊìáÔºå(n)
chubby@6ËÉñÂòüÂòüÁöÑÔºåÂúìËÉñÁöÑÔºå(adj)
claim@5ËÅ≤Á®±Ôºå‰∏ªÂºµÔºå(vt)
clap@4ÊãçÊâãÔºåÊãçÔºå(v)
classical@9Âè§ÂÖ∏ÁöÑÔºå(adj)
climate@7Ê∞£ÂÄôÔºå(n)
closet@6Â£ÅÊ´•ÔºåÂ∞èÊ´•Ôºå(n)
coach@5Èï∑ÈÄîÊ±ΩËªäÔºåÊïôÁ∑¥Ôºå(n)
cockroach@9ËüëËûÇÔºå(n)
command@7ÂëΩ‰ª§ÔºåÊåáÊèÆÔºå(vt)
comment@7Ë®ªÈáãÔºåË©ïË´ñÔºå(n)
complain@8Êä±ÊÄ®Ôºå(v)
confident@9Ëá™‰ø°ÁöÑÔºå(adj)
confuse@7‰ΩøÊ∑∑‰∫ÇÔºå(vt)
contract@8ÂêàÂêåÔºåÂ•ëÁ¥ÑÔºå(n)
court@5Â∫≠Èô¢ÔºåÊ≥ïÂ∫≠Ôºå(n)
crab@4ËüπÔºå(n)
create@6ÂâµÈÄ†ÔºåÂâµ‰ΩúÔºå(v)
crime@5ÁäØÁΩ™ÔºåÁΩ™Ë°åÔºå(n)
crowded@7ÊìÅÊì†ÁöÑÔºå(adj)
culture@7ÊñáÂåñÔºå(n)
curve@5Êõ≤Á∑öÔºå(n)
custom@6È¢®‰øóÁøíÊÖ£Ôºå(n)
damage@6ÊØÄÂ£ûÔºåÊêçÂÆ≥Ôºå(vt)
debate@6ËæØË´ñÔºåÁà≠Ë´ñÔºå(n)
decorate@8Ë£ùÈ£æÔºå(vt)
deliver@7ÊäïÈÅûÔºåÁôºË°®Ôºå(vt)
dessert@7ÁîúÈªûÔºå(n)
ability@7ËÉΩÂäõÔºåÊâçÂππÔºå(n)
add@3Ê∑ªÂä†Ôºå(vt)
adjective@9ÂΩ¢ÂÆπË©ûÁöÑÔºå(adj)
admire@6Ê¨Ω‰Ω©ÔºåËÆöË≥ûÔºå(vt)
adopt@5Êî∂È§äÔºåÊé°ÂèñÔºå(vt)
advance@7ÂâçÈÄ≤Ôºå(n)
advantage@9ÂÑ™Âã¢ÔºåÂà©ÁõäÔºå(n)
adverb@6ÂâØË©ûÔºå(n)
aircraft@8È£õË°åÂô®Ôºå(n)
alley@5ÂºÑÔºåÂ∞èÂ∑∑Ôºå(n)
angel@5Â§©‰ΩøÔºå(n)
anyway@6ÁÑ°Ë´ñÂ¶Ç‰ΩïÔºå(adv)
appearance@10Â§ñË≤åÔºåÂ§ñËßÄÔºå(n)
attend@6Âá∫Â∏≠Ôºå(v)
attention@9Ê≥®ÊÑèÔºå(n)
auxiliary@9ËºîÂä©ÁöÑÔºå(adj)
available@9ÂèØÂà©Áî®ÁöÑÔºå(adj)
backward@8ÂêëÂæåÂú∞Ôºå(adv)
balloon@7Ê∞£ÁêÉÔºå(n)
bar@3Ê¢ùÔºåÊ£íÔºåÈÖíÂêßÔºå(n)
basic@5Âü∫Êú¨ÁöÑÔºå(adj)
beautifully@11ÁæéÈ∫óÂú∞Ôºå(adv)
besides@7Âú®‚Ä¶ÊóÅÈÇäÔºå(prep)
best@4ÊúÄÂ•ΩÁöÑÔºå(adj)
blood@5Ë°ÄÔºå(n)
button@6ÈàïÊâ£Ôºå(n)
carefully@9Â∞èÂøÉÂú∞Ôºå(adv)
cartoon@7Âç°ÈÄöÔºåÊº´Áï´Ôºå(n)
cause@5ÂéüÂõ†Ôºå(n)
cell@4Á¥∞ËÉûÔºåÈõªÊ±†Ôºå(n)
certainly@9ÁöÑÁ¢∫Ôºå‰∏ÄÂÆöÔºå(adv)
chairman@8‰∏ªÂ∏≠Ôºå(n)
citizen@7ÂÖ¨Ê∞ëÔºåÂ∏ÇÊ∞ëÔºå(n)
coast@5Êµ∑Â≤∏Ôºå(n)
comfortably@11ËàíÈÅ©Âú∞Ôºå(adv)
cookies@7È§Ö‰πæÔºå(n)
daily@5ÊØèÊó•ÁöÑÔºå(adj)
dancing@7Ë∑≥ËàûÔºå(n)
dawn@4ÈªéÊòéÔºå(n)
deal@4‰∫§ÊòìÔºåËôïÁêÜÔºå(vi)
delay@5Êé®ÈÅ≤ÔºåËÄΩÊì±Ôºå(n)
dentist@7ÁâôÈÜ´Ôºå(n)
department@10ÈÉ®ÈñÄÔºå(n)
detect@6ÁôºË¶∫ÔºåË≠òÁ†¥Ôºå(v)
dial@4Êí•ËôüÁõ§Ôºå(n)
diligent@8Âã§Â•ÆÁöÑÔºå(adj)
disappear@9Ê∂àÂ§±Ôºå(v)
discuss@7Ë®éË´ñÔºå(v)
dishonest@9‰∏çË™†ÂØ¶ÁöÑÔºå(adj)
divide@6ÂäÉÂàÜÔºåÈô§Ôºå(vt)
dizzy@5ÊöàÁú©ÁöÑÔºå(adj)
dolphin@7Êµ∑Ë±öÔºå(n)
donkey@6È©¢Â≠êÔºå(n)
dot@3ÈªûÔºå(n)
doughnut@8ÁîúÁîúÂúàÔºå(n)
dragon@6ÈæçÔºå(n)
drama@5Êà≤ÂäáÔºå(n)
drawer@6ÊäΩÂ±úÔºå(n)
dresser@7Á¢óÊ´ÉÔºå(n)
drinks@6È£≤ÊñôÔºå(n)
drugstore@9Ëó•Â±ÄÔºå(n)
dryer@5ÁÉò‰πæÊ©üÔºå(n)
earrings@8ËÄ≥Áí∞Ôºå(n)
edge@4ÈÇäÁ∑£Ôºå(n)
effect@6ÊïàÊûúÔºå‰ΩúÁî®Ôºå(n)
effort@6Âä™ÂäõÔºå(n)
elect@5ÈÅ∏ËàâÔºå(v)
emotion@7ÊÉÖÊÑüÔºåÊÉÖÁ∑íÔºå(n)
emphasize@9Âº∑Ë™øÔºå(v)
encourage@9ÈºìÂãµÔºå(vt)
engine@6ÂºïÊìéÔºå(n)
equal@5Áõ∏Á≠âÁöÑÔºå(adj)
error@5ÈåØË™§Ôºå(n)
evil@4ÈÇ™ÊÉ°ÁöÑÔºå(adj)
exact@5Á≤æÁ¢∫ÁöÑÔºå(adj)
eyebrow@7ÁúâÊØõÔºå(n)
far@3ÈÅ†Ôºå(adj)
faucet@6Ê∞¥ÈæçÈ†≠Ôºå(n)
favor@5Â•ΩÊÑüÔºåÊÅ©ÊÉ†Ôºå(n)
feeling@7ÊÑüË¶∫Ôºå(n)
figure@6Êï∏Â≠óÔºåÈ´îÂΩ¢Ôºå(n)
firm@4ÂÖ¨Âè∏Ôºå(n)
flag@4ÊóóÂπüÔºå(n)
flight@6È£õË°åÔºåËà™Áè≠Ôºå(n)
flour@5È∫µÁ≤âÔºå(n)
flow@4ÊµÅÂãïÔºå(vi)
flu@3ÊµÅÊÑüÔºå(n)
forgive@7ÂéüË´íÔºå(v)
frank@5ÁéáÁõ¥ÁöÑÔºå(adj)
freedom@7Ëá™Áî±Ôºå(n)
freezer@7ÂÜ∞ÁÆ±Ôºå(n)
freezing@8ÁµêÂÜ∞ÁöÑÔºå(adj)
gesture@7ÊâãÂã¢Ôºå(n)
ghost@5È¨ºÔºå(n)
glasses@7ÁúºÈè°Ôºå(n)
golf@4È´òÁàæÂ§´Ôºå(n)
goodness@8ÂñÑËâØÔºå(n)
guava@5ËïÉÁü≥Ê¶¥Ôºå(n)
guy@3ÂÇ¢‰ºôÔºå(n)
hammer@6ÊßåÔºå(n)
hanger@6Ë°£Êû∂Ôºå(n)
heater@6ÊöñÁàêÔºå(n)
hiking@6ÂæíÊ≠•ÊóÖË°åÔºå(n)
hip@3ËáÄÈÉ®Ôºå(n)
homesick@8ÊÉ≥ÂÆ∂ÁöÑÔºå(adj)
honesty@7Ë™†ÂØ¶Ôºå(n)
honey@5ËúÇËúúÔºå(n)
host@4‰∏ª‰∫∫Ôºå(n)
huge@4Â∑®Â§ßÁöÑÔºå(adj)
humid@5ÊΩÆÊøïÁöÑÔºå(adj)
humor@5ÂπΩÈªòÔºå(n)
hunt@4Áã©ÁçµÔºå(v)
hunter@6Áçµ‰∫∫Ôºå(n)
impolite@8ÁÑ°Á¶ÆÁöÑÔºå(adj)
income@6Êî∂ÂÖ•Ôºå(n)
increase@8Â¢ûÂä†Ôºå(v)
independent@11Áç®Á´ãÁöÑÔºå(adj)
insist@6Â†ÖÊåÅÔºå(v)
instrument@10ÂÑÄÂô®ÔºåÊ®ÇÂô®Ôºå(n)
intelligent@11ËÅ∞ÊòéÁöÑÔºå(adj)
invent@6ÁôºÊòéÔºå(v)
invitation@10ÈÇÄË´ãÔºå(n)
jazz@4ÁàµÂ£´Ê®ÇÔºå(n)
jogging@7ÊÖ¢Ë∑ëÔºå(n)
ketchup@7ËïÉËåÑÈÜ¨Ôºå(n)
kingdom@7ÁéãÂúãÔºå(n)
kitten@6Â∞èË≤ìÔºå(n)
accept@6Êé•ÂèóÔºå(vt)
across@6Ê©´ÈÅéÔºå(prep)
act@3Ë°åÂãïÔºå(vi)
active@6Ê¥ªË∫çÁöÑÔºå(adj)
actor@5Áî∑ÊºîÂì°Ôºå(n)
actress@7Â•≥ÊºîÂì°Ôºå(n)
addition@8Âä†Ê≥ïÔºåÂ¢ûÂä†Ôºå(n)
address@7Âú∞ÂùÄÔºåÊºîË¨õÔºå(n)
advice@6Âã∏ÂëäÔºå(n)
advise@6Âª∫Ë≠∞Ôºå(vt)
affair@6‰∫ãÊÉÖÔºå(n)
against@7ÈÅïÂèçÔºåÂèçÂ∞çÔºå(prep)
ahead@5Âú®ÂâçÔºåÊèêÂâçÔºå(adv)
aim@3ÁûÑÊ∫ñÔºåÁõÆÊ®ôÔºå(n)
airline@7Ëà™Á∑öÔºå(n)
alive@5Ê¥ªËëóÁöÑÔºå(adj)
allow@5ÂÖÅË®±Ôºå(vt)
alone@5ÂñÆÁç®ÁöÑÔºå(adj)
among@5Âú®‚Ä¶‰πã‰∏≠Ôºå(prep)
amount@6ÂêàË®àÔºå(vi)
anger@5ÊÜ§ÊÄíÔºå(n)
area@4Âú∞ÂçÄÔºåÈù¢Á©çÔºå(n)
argue@5Áà≠Ë´ñÔºå(vi)
artist@6ËóùË°ìÂÆ∂Ôºå(n)
asleep@6Áù°Ë¶∫ÁöÑÔºå(adj)
assistant@9Âä©ÊâãÔºå(n)
attack@6ÊîªÊìäÔºå(v)
audience@8ËßÄÁúæÔºå(n)
awake@5ÂñöÈÜíÔºå(vt)
aware@5ÊÑèË≠òÂà∞Ôºå(adj)
bake@4ÁÉòÔºåÁÉ§Ôºå(vt)
banker@6ÈäÄË°åÂÆ∂Ôºå(n)
beat@4ÊâìÔºåÊìäÔºå(vt)
beer@4Âï§ÈÖíÔºå(n)
beginner@8ÂàùÂ≠∏ËÄÖÔºå(n)
belief@6‰ø°‰ª∞Ôºå(n)
bench@5Èï∑Âá≥Ôºå(n)
better@6Êõ¥Â•ΩÁöÑÔºå(adj)
bill@4Â∏≥ÂñÆÔºå(n)
blanket@7ÊØØÂ≠êÔºå(n)
boil@4Ê≤∏È®∞Ôºå(vi)
bone@4È™®È†≠Ôºå(n)
bow@3ÂºìÔºåÈû†Ë∫¨Ôºå(n)
brain@5ËÖ¶Ôºå(n)
branch@6Ê®πÊûùÔºåÂàÜÂ∫óÔºå(n)
brave@5ÂãáÊï¢ÁöÑÔºå(adj)
brief@5Á∞°Áü≠ÁöÑÔºå(adj)
broad@5ÂØ¨ÁöÑÔºå(adj)
broadcast@9Âª£Êí≠Ôºå(n)
bucket@6Ê∞¥Ê°∂Ôºå(n)
cage@4Á±†Â≠êÔºå(n)
calm@4Âπ≥ÈùúÁöÑÔºå(adj)
candle@6Ë†üÁá≠Ôºå(n)
captain@7ÈöäÈï∑ÔºåËàπÈï∑Ôºå(n)
career@6ËÅ∑Ê•≠ÔºåÁîüÊ∂ØÔºå(n)
carpet@6Âú∞ÊØØÔºå(n)
carrot@6ËÉ°ËòøËîîÔºå(n)
castle@6ÂüéÂ†°Ôºå(n)
ceiling@7Â§©Ëä±ÊùøÔºå(n)
central@7‰∏≠ÂøÉÁöÑÔºå(adj)
chapter@7Á´†ÁØÄÔºå(n)
chart@5ÂúñË°®Ôºå(n)
chief@5È¶ñÈ†òÔºå‰∏ªË¶ÅÁöÑÔºå(n)
choose@6ÈÅ∏ÊìáÔºå(vt)
classic@7Á∂ìÂÖ∏ÁöÑÔºå(adj)
clerk@5Â∫óÂì°Ôºå(n)
clever@6ËÅ∞ÊòéÁöÑÔºå(adj)
cloth@5Â∏ÉÔºå(n)
coin@4Á°¨Âπ£Ôºå(n)
collection@10Êî∂ËóèÔºå(n)
college@7Â§ßÂ≠∏Ôºå(n)
comb@4Ê¢≥Â≠êÔºå(n)
company@7ÂÖ¨Âè∏ÔºåÈô™‰º¥Ôºå(n)
compare@7ÊØîËºÉÔºå(vt)
complete@8ÂÆåÊàêÔºå(vt)
confirm@7Ë≠âÂØ¶Ôºå(vt)
conflict@8Ë°ùÁ™ÅÔºå(n)
consider@8ËÄÉÊÖÆÔºå(vt)
contain@7ÂåÖÂê´Ôºå(vt)
continue@8ÁπºÁ∫åÔºå(v)
control@7ÊéßÂà∂Ôºå(n)
corn@4ÁéâÁ±≥Ôºå(n)
corner@6ËßíËêΩÔºå(n)
cotton@6Ê£âËä±Ôºå(n)
cough@5Âí≥ÂóΩÔºå(n)
countryside@11ÈÑâÊùëÔºå(n)
couple@6Â§´Â©¶Ôºå(n)
courage@7ÂãáÊ∞£Ôºå(n)
course@6Ë™≤Á®ãÔºåË∑ØÁ∑öÔºå(n)
crayon@6Ë†üÁ≠ÜÔºå(n)
cream@5Â•∂Ê≤πÔºå(n)
crisis@6Âç±Ê©üÔºå(n)
crowd@5‰∫∫Áæ§Ôºå(n)
cruel@5ÊÆòÂøçÁöÑÔºå(adj)
cure@4Ê≤ªÁôÇÔºå(vt)
curious@7Â•ΩÂ•áÁöÑÔºå(adj)
current@7ÁõÆÂâçÁöÑÔºå(adj)
curtain@7Á™óÁ∞æÔºå(n)
customer@8È°ßÂÆ¢Ôºå(n)
danger@6Âç±Èö™Ôºå(n)
data@4Ë≥áÊñôÔºå(n)
deaf@4ËÅæÁöÑÔºå(adj)
death@5Ê≠ª‰∫°Ôºå(n)
debt@4ÂÇµÂãôÔºå(n)
decision@8Ê±∫ÂÆöÔºå(n)
deep@4Ê∑±ÁöÑÔºå(adj)
deer@4ÈπøÔºå(n)
degree@6Â∫¶Êï∏ÔºåÂ≠∏‰ΩçÔºå(n)
deny@4Âê¶Ë™çÔºå(vt)
depend@6‰æùÈù†Ôºå(vi)
describe@8ÊèèËø∞Ôºå(vt)
desert@6Ê≤ôÊº†Ôºå(n)
design@6Ë®≠Ë®àÔºå(v)
desire@6Ê∏¥ÊúõÔºå(n)
develop@7ÁôºÂ±ïÔºå(v)
diamond@7ÈëΩÁü≥Ôºå(n)
diary@5Êó•Ë®òÔºå(n)
diet@4È£≤È£üÔºå(n)
difference@10Â∑ÆÁï∞Ôºå(n)
difficulty@10Âõ∞Èõ£Ôºå(n)
dinosaur@8ÊÅêÈæçÔºå(n)
direction@9ÊñπÂêëÔºå(n)
discover@8ÁôºÁèæÔºå(v)
discussion@10Ë®éË´ñÔºå(n)
distance@8Ë∑ùÈõ¢Ôºå(n)
document@8Êñá‰ª∂Ôºå(n)
double@6ÈõôÂÄçÁöÑÔºå(adj)
drawing@7Áπ™Áï´Ôºå(n)
drug@4Ëó•Áâ©Ôºå(n)
duck@4È¥®Â≠êÔºå(n)
eagle@5ËÄÅÈ∑πÔºå(n)
earn@4Ë≥∫ÂèñÔºå(vt)
education@9ÊïôËÇ≤Ôºå(n)
effective@9ÊúâÊïàÁöÑÔºå(adj)
elder@5Âπ¥Èï∑ÁöÑÔºå(adj)
election@8ÈÅ∏ËàâÔºå(n)
electric@8ÈõªÁöÑÔºå(adj)
element@7ÂÖÉÁ¥†Ôºå(n)
empty@5Á©∫ÁöÑÔºå(adj)
enemy@5Êïµ‰∫∫Ôºå(n)
energy@6ËÉΩÈáèÔºå(n)
engineer@8Â∑•Á®ãÂ∏´Ôºå(n)
entrance@8ÂÖ•Âè£Ôºå(n)
envelope@8‰ø°Â∞ÅÔºå(n)
envy@4Áæ°ÊÖïÔºå(v)
event@5‰∫ã‰ª∂Ôºå(n)
exam@4ËÄÉË©¶Ôºå(n)
exist@5Â≠òÂú®Ôºå(vi)
exit@4Âá∫Âè£Ôºå(n)
expect@6ÊúüÂæÖÔºå(vt)
explain@7Ëß£ÈáãÔºå(vt)
extra@5È°çÂ§ñÁöÑÔºå(adj)
fail@4Â§±ÊïóÔºå(v)
false@5ÈåØË™§ÁöÑÔºå(adj)
fancy@5Ëä±‰øèÁöÑÔºå(adj)
fault@5ÈåØË™§Ôºå(n)
fear@4ÊÅêÊáºÔºå(n)
feather@7ÁæΩÊØõÔºå(n)
fence@5ÂúçÊ¨ÑÔºå(n)
fever@5ÁôºÁáíÔºå(n)
fight@5ÊâìÊû∂Ôºå(v)
film@4ÈõªÂΩ±Ôºå(n)
final@5ÊúÄÂæåÁöÑÔºå(adj)
fool@4ÂÇªÁìúÔºå(n)
foolish@7ÊÑöË†¢ÁöÑÔºå(adj)
football@8Ë∂≥ÁêÉÔºå(n)
force@5ÂäõÈáèÔºåÂº∑Ëø´Ôºå(n)
forest@6Ê£ÆÊûóÔºå(n)
form@4ÂΩ¢ÂºèÔºåË°®Ê†ºÔºå(n)
`;

    // --- PARSING LOGIC ---
    let appData = [];
    
    function parseData() {
        const lines = rawDataString.split('\n');
        lines.forEach(line => {
            line = line.trim();
            if (!line) return;
            
            // Format: word@lengthDef
            // Regex to find the first @ and digits
            const match = line.match(/^(.+?)@(\d+)(.+)$/);
            if (match) {
                appData.push({
                    word: match[1].trim(),
                    length: parseInt(match[2]),
                    def: match[3].trim()
                });
            } else if (line.includes('@')) {
                // Fallback basic split if regex fails (e.g., no digits)
                const parts = line.split('@');
                const w = parts[0].trim();
                const d = parts[1] ? parts[1].replace(/^\d+/, '').trim() : '';
                appData.push({ word: w, length: w.length, def: d });
            }
        });
        
        // Sort alphabetically by default
        appData.sort((a, b) => a.word.localeCompare(b.word));
    }

    // --- APP STATE ---
    let currentMode = 'spell';
    let currentGameData = [];
    let currentIndex = 0;
    const itemsPerPage = 12;
    
    // Spell Mode State
    let spellPages = [];
    let currentSpellPage = 0;

    // Match Mode State
    let matchPairs = [];
    let selectedCard = null;
    let matchedCount = 0;
    let isProcessing = false;

    // --- INITIALIZATION ---
    window.onload = function() {
        parseData();
        generateCategoryGrid();
        renderStudyList();
        
        // Input Search Listener for Study Mode
        document.getElementById('study-search').addEventListener('input', (e) => {
            renderStudyList(e.target.value);
        });
    };

    // --- NAVIGATION & VIEWS ---
    function setMode(mode, el) {
        currentMode = mode;
        document.querySelectorAll('.toggle-opt').forEach(d => d.classList.remove('selected'));
        el.classList.add('selected');
    }

    function switchView(viewId) {
        document.querySelectorAll('.view').forEach(v => v.classList.remove('active'));
        document.getElementById('view-' + viewId).classList.add('active');
    }

    function goHome() {
        switchView('dashboard');
    }

    function showStudyMode() {
        switchView('study');
        renderStudyList();
    }

    // --- DASHBOARD LOGIC ---
    function generateCategoryGrid() {
        const grid = document.getElementById('category-grid');
        const alphabet = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'.split('');
        
        alphabet.forEach(letter => {
            const btn = document.createElement('div');
            btn.className = 'cat-btn';
            btn.innerText = letter;
            btn.onclick = () => startGame(letter);
            grid.appendChild(btn);
        });
    }

    function getFilteredData(filterChar) {
        const lengthFilter = document.getElementById('length-filter').value;
        
        return appData.filter(item => {
            // Filter by Letter (if provided)
            const matchLetter = filterChar ? item.word.toUpperCase().startsWith(filterChar) : true;
            
            // Filter by Length
            let matchLength = true;
            if (lengthFilter !== 'all') {
                if (lengthFilter === '7') {
                    matchLength = item.length >= 7;
                } else {
                    matchLength = item.length == parseInt(lengthFilter);
                }
            }
            
            return matchLetter && matchLength;
        });
    }

    function startRandomGame() {
        startGame(null, true);
    }

    function startGame(filterChar, isRandom = false) {
        let data = isRandom ? [...appData] : getFilteredData(filterChar);
        
        if (isRandom) {
            // Filter by length even in random mode
            const lengthFilter = document.getElementById('length-filter').value;
            if (lengthFilter !== 'all') {
                 data = data.filter(item => {
                    if (lengthFilter === '7') return item.length >= 7;
                    return item.length == parseInt(lengthFilter);
                 });
            }
            // Shuffle
            data.sort(() => Math.random() - 0.5);
            // Limit random mode to 20 items to keep it manageable
            data = data.slice(0, 20); 
        }

        if (data.length === 0) {
            alert("No words found for this category/length combination.");
            return;
        }

        currentGameData = data;
        
        if (currentMode === 'spell') {
            setupSpellingGame();
        } else {
            setupMatchingGame();
        }
    }

    // --- SPELLING GAME ---
    function setupSpellingGame() {
        // Chunk data into pages
        spellPages = [];
        for (let i = 0; i < currentGameData.length; i += itemsPerPage) {
            spellPages.push(currentGameData.slice(i, i + itemsPerPage));
        }
        currentSpellPage = 0;
        renderSpellPage();
        switchView('spell');
    }

    function renderSpellPage() {
        const container = document.getElementById('spell-container');
        container.innerHTML = '';
        
        const items = spellPages[currentSpellPage];
        document.getElementById('spell-progress').innerText = `Page ${currentSpellPage + 1}/${spellPages.length}`;

        items.forEach((item, idx) => {
            const card = document.createElement('div');
            card.className = 'spell-card';
            
            // Create inputs with ID for checking later
            // Store answer in dataset
            card.innerHTML = `
                <div class="question-text">${item.def}</div>
                <div class="input-group">
                    <input type="text" class="spell-input" 
                        id="inp-${idx}" 
                        data-answer="${item.word}" 
                        placeholder="Type answer..." 
                        autocomplete="off">
                    <div class="hint-btn" onclick="showHint('inp-${idx}', '${item.word}')">?</div>
                </div>
            `;
            container.appendChild(card);
        });

        // Toggle buttons
        document.getElementById('prev-btn').style.visibility = currentSpellPage > 0 ? 'visible' : 'hidden';
        document.getElementById('next-btn').style.visibility = currentSpellPage < spellPages.length - 1 ? 'visible' : 'hidden';
    }

    function checkSpelling() {
        const inputs = document.querySelectorAll('.spell-input');
        inputs.forEach(inp => {
            const userVal = inp.value.trim().toLowerCase();
            const correctVal = inp.dataset.answer.toLowerCase();
            
            // Smart matching: Handle parentheses e.g. "bicycle (bike)"
            // Logic: Correct if user types full string OR content in parens OR word without parens
            let isValid = false;
            
            if (userVal === correctVal) isValid = true;
            
            if (!isValid && correctVal.includes('(')) {
                // Extract parts
                const mainWord = correctVal.replace(/\(.*\)/, '').trim();
                const altWord = correctVal.match(/\((.*)\)/)?.[1]?.trim();
                
                if (userVal === mainWord || userVal === altWord) isValid = true;
            }

            if (isValid) {
                inp.classList.remove('wrong');
                inp.classList.add('correct');
            } else {
                inp.classList.remove('correct');
                inp.classList.add('wrong');
            }
        });
    }

    function showHint(inputId, answer) {
        const inp = document.getElementById(inputId);
        // Show first 2 letters or full word if short
        inp.value = answer; 
        inp.focus();
    }

    function changePage(dir) {
        currentSpellPage += dir;
        renderSpellPage();
        // Reset scroll
        document.getElementById('view-spell').scrollTop = 0;
    }

    // --- MATCHING GAME ---
    function setupMatchingGame() {
        // Need sets of 5 pairs (10 cards)
        // We will process the full currentGameData in batches of 5
        currentIndex = 0;
        matchedCount = 0;
        startMatchingRound();
        switchView('match');
    }

    function startMatchingRound() {
        const roundData = currentGameData.slice(currentIndex, currentIndex + 5);
        if (roundData.length === 0) {
            alert("Game Over! Good job.");
            goHome();
            return;
        }

        currentIndex += 5;
        matchedCount = 0;
        document.getElementById('match-next-btn').classList.add('hidden');
        document.getElementById('match-score').innerText = `Pairs: 0/${roundData.length}`;

        // Create cards
        let cards = [];
        roundData.forEach(item => {
            // Word card
            cards.push({ id: item.word, text: item.word, type: 'word', pair: item.word });
            // Definition card
            cards.push({ id: item.word + '_def', text: item.def, type: 'def', pair: item.word });
        });

        // Shuffle
        cards.sort(() => Math.random() - 0.5);

        const grid = document.getElementById('match-area');
        grid.innerHTML = '';

        cards.forEach(card => {
            const el = document.createElement('div');
            el.className = 'match-card';
            el.innerText = card.text;
            el.dataset.pair = card.pair;
            el.onclick = () => handleCardTap(el);
            grid.appendChild(el);
        });
    }

    function handleCardTap(el) {
        if (isProcessing || el.classList.contains('matched') || el.classList.contains('selected')) return;

        el.classList.add('selected');

        if (!selectedCard) {
            // First tap
            selectedCard = el;
        } else {
            // Second tap
            const card1 = selectedCard;
            const card2 = el;
            selectedCard = null;
            isProcessing = true;

            if (card1.dataset.pair === card2.dataset.pair) {
                // Match
                setTimeout(() => {
                    card1.classList.remove('selected');
                    card2.classList.remove('selected');
                    card1.classList.add('matched');
                    card2.classList.add('matched');
                    isProcessing = false;
                    matchedCount++;
                    document.getElementById('match-score').innerText = `Pairs: ${matchedCount}`;
                    
                    // Check if round clear (10 cards total in grid usually, or less)
                    const remaining = document.querySelectorAll('.match-card:not(.matched)');
                    if (remaining.length === 0) {
                        document.getElementById('match-next-btn').classList.remove('hidden');
                    }
                }, 300);
            } else {
                // No Match
                setTimeout(() => {
                    card1.classList.add('error');
                    card2.classList.add('error');
                }, 200);

                setTimeout(() => {
                    card1.classList.remove('selected', 'error');
                    card2.classList.remove('selected', 'error');
                    isProcessing = false;
                }, 800);
            }
        }
    }

    // --- STUDY LIST LOGIC ---
    function renderStudyList(searchTerm = '') {
        const list = document.getElementById('study-list');
        list.innerHTML = '';
        
        const term = searchTerm.toLowerCase();
        const filtered = appData.filter(item => 
            item.word.toLowerCase().includes(term) || 
            item.def.includes(term)
        );

        // Optimization: show max 100 items if no search to prevent lag
        const displayData = term ? filtered : filtered.slice(0, 100);

        displayData.forEach(item => {
            const li = document.createElement('li');
            li.className = 'study-item';
            li.innerHTML = `
                <span class="study-word">${item.word}</span>
                <span class="study-def">${item.def}</span>
            `;
            list.appendChild(li);
        });

        if (!term && filtered.length > 100) {
            const more = document.createElement('li');
            more.style.textAlign = 'center';
            more.style.padding = '10px';
            more.style.color = '#888';
            more.innerText = `...and ${filtered.length - 100} more items. Type to search.`;
            list.appendChild(more);
        }
    }

</script>
</body>
</html>